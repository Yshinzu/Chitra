<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>‡¶ö‡¶ø‡¶§‡ßç‡¶∞‡¶æ SOS</title>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: url("https://images.unsplash.com/photo-1600195077077-8e48f8f112f5?fit=crop&w=1600&h=900") center/cover fixed;
      color: white;
      margin: 0;
    }
    .overlay { 
      background: rgba(0,0,0,0.45); 
      min-height: 100vh; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
      text-align: center;
    }
    .sos-button {
      width:200px; height:200px;
      border-radius:50%;
      background:radial-gradient(circle,#ff4d4d,#ff0000);
      box-shadow:0 0 40px rgba(255,77,77,.6);
      cursor:pointer;
      animation:pulse 2s infinite;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      margin-top:30px;
    }
    @keyframes pulse {
      0%{box-shadow:0 0 0 0 rgba(255,77,77,.7);}
      70%{box-shadow:0 0 0 20px rgba(255,77,77,0);}
      100%{box-shadow:0 0 0 0 rgba(255,77,77,0);}
    }
    @keyframes siren {
      0%{background:radial-gradient(circle,#ff0000,#990000);}
      50%{background:radial-gradient(circle,#0000ff,#000099);}
      100%{background:radial-gradient(circle,#ff0000,#990000);}
    }
    .siren-active { animation:siren .5s infinite alternate, pulse 2s infinite; }
    .modal { display:flex;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;z-index:1000; }
    .modal-content { background:white;color:black;padding:20px;border-radius:12px;max-width:400px;width:90%; display:flex; flex-direction:column; text-align:center; }
    .modal-content input { width:100%;margin-bottom:10px;padding:8px;border:1px solid #ccc;border-radius:6px; }
    button { cursor:pointer; }
  </style>
</head>
<body>
<audio id="sirenSound" src="https://actions.google.com/sounds/v1/alarms/police_siren.ogg" preload="auto"></audio>

<div class="overlay">
  <header style="background:rgba(0,0,0,0.6); padding:16px; width:100%; text-align:center;">
    <h1 style="font-size:48px; color:#f87171;">‡¶ö‡¶ø‡¶§‡ßç‡¶∞‡¶æ</h1>
  </header>
  <main>
    <h2 style="font-size:32px; margin-bottom:16px;">üö® ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ</h2>
    <p style="color:#e5e7eb; margin-bottom:32px; max-width:400px;">SOS ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®‡•§ ‡¶ö‡¶ø‡¶§‡ßç‡¶∞‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá‡•§</p>
    <div class="sos-button" id="sosButton">
      <span style="font-size:48px;">üö®</span>
      <span style="color:white; font-weight:bold; margin-top:8px;">HELP ME</span>
    </div>
  </main>
</div>

<div class="modal" id="contactModal">
  <div class="modal-content">
    <h2 style="font-size:20px; margin-bottom:8px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶≠‡¶æ‡¶¨‡¶ï‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®</h2>
    <input type="text" id="guardianWhatsapp" placeholder="Guardian WhatsApp (+91...)" />
    <input type="email" id="guardianEmail" placeholder="Guardian Email (optional)" />
    <button id="saveContacts" style="background:#dc2626; color:white; padding:12px; border-radius:8px; font-weight:bold;">Save</button>
  </div>
</div>

<script>
  let guardianContacts = JSON.parse(localStorage.getItem("guardianContacts"));

  // If no contact info, show modal first
  if (!guardianContacts) {
    document.getElementById("contactModal").style.display = "flex";
  }

  const siren = document.getElementById("sirenSound");

  // Save contacts
  document.getElementById("saveContacts").onclick = () => {
    const whatsapp = document.getElementById("guardianWhatsapp").value.trim();
    const email = document.getElementById("guardianEmail").value.trim();
    if (!whatsapp) {
      alert("Please enter the guardian's WhatsApp number.");
      return;
    }

    guardianContacts = { guardianWhatsapp: whatsapp, guardianEmail: email };
    localStorage.setItem("guardianContacts", JSON.stringify(guardianContacts));
    document.getElementById("contactModal").style.display = "none";
    alert("‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚úÖ");

    // Activate siren and redirect
   <script>
function activateSiren() {
  const sosBtn = document.getElementById("sosButton");
  sosBtn.classList.add("siren-active");
  const siren = document.getElementById("sirenSound");
  siren.loop = true; 
  siren.play();

  // Get user location
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(position => {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const c = guardianContacts;

      // Compose WhatsApp message with GPS link
      const message = encodeURIComponent(
        `üö® ‡¶Ü‡¶Æ‡¶ø ‡¶¨‡¶ø‡¶™‡¶¶‡ßá ‡¶Ü‡¶õ‡¶ø! ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§\n\nüìç ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®:\nhttps://www.google.com/maps?q=${lat},${lon}\n\n- ‡¶ö‡¶ø‡¶§‡ßç‡¶∞‡¶æ SOS`
      );

      // Redirect after 2 seconds
      setTimeout(() => {
        window.location.href = `https://wa.me/${c.guardianWhatsapp}?text=${message}`;
      }, 2000);
    }, error => {
      // If location fails, send message without location
      const c = guardianContacts;
      const message = encodeURIComponent("üö® ‡¶Ü‡¶Æ‡¶ø ‡¶¨‡¶ø‡¶™‡¶¶‡ßá ‡¶Ü‡¶õ‡¶ø! ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ - ‡¶ö‡¶ø‡¶§‡ßç‡¶∞‡¶æ SOS");
      setTimeout(() => {
        window.location.href = `https://wa.me/${c.guardianWhatsapp}?text=${message}`;
      }, 2000);
    });
  } else {
    alert("Location access not supported in your browser.");
  }
}
</script>

  }

  // SOS button can also trigger modal again if user wants to update
  document.getElementById("sosButton").onclick = () => {
    document.getElementById("contactModal").style.display = "flex";
  };
</script>
</body>
</html>

